tosca_definitions_version: cloudify_dsl_1_3

imports:
  - http://cloudify.co/spec/cloudify/5.0.0/types.yaml
  - http://www.getcloudify.org/spec/fabric-plugin/1.5.3/plugin.yaml

inputs:
  regional_list:
    default: [regional1]
  helm-package:
    default: nginx-stable/nginx-ingress

node_templates:
  regional-deploy:
    type: cloudify.nodes.Root
    interfaces:
      cloudify.interfaces.lifecycle:
        start:
          implementation: scripts/regional_deploy.py
          inputs:
             package-name: {get_input: helm-package}
             regions: {get_input: regional-list}
        stop:
          implementation: scripts/regional_undeploy.py
          inputs:
             package-name: {get_input: helm-package}
             regions: {get_input: regional-list}


